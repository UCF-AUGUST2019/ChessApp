<div class="game_bar row text-center pt-4">
	<div class="col-12 col-sm-3 text-left mb-1">
		<h5 class="game_title"><%= @game.name %></h5>
	</div>
	<div class="col-12 col-sm-4 offset-sm-1"> 
		<h5 class="game_labels">White Player:</h5> <%= @game.white_player.username %>
	</div>
	<div class="col-12 col-sm-4">
		<h5 class="game_labels">Red Player:</h5>
		<% if @game.black_player.present? %>
			<%= @game.black_player&.username %>
		<% else %>
			Waiting for opponent...
		<% end %>
	</div> 
</div>

<div id="show_game">
	<div class="col-12 turn text-center mt-0">
		<% if @game.turn.odd? && @game.white_player == current_user || @game.turn.even? && @game.black_player == current_user %>
			It's Your Move
		<% else %>
			Waiting for Opponent's Move
		<% end %>
		&nbsp <%= link_to 'Forfeit Game', concede_game_path(@game), class: 'button btn btn-lg btn-danger forfeit mt-4 mb-4', user_id: current_user, method: :put, data: { confirm: 'Are you sure you want to forfeit? (It will count as a loss)' } %>
	</div>
	<div class="chessboard">
		<% (1..8).each do |y| %>
			<div class="row">
				<% (1..8).each do |x| %>
					<div class="<%= (x + y).odd? ? 'black' : 'white' %> space">
						<% @game.pieces.where(x_pos: x, y_pos: y).each do |piece| %>
							<% if piece.player_id == @game.white_id %>
								<span class="<%= piece.render %> white piece"></span>
							<% else %>
								<span class="<%= piece.render %> red piece"></span>
							<% end %>
						<% end %>
					</div>
				<% end %>
			</div>
		<% end %>
	</div>
</div>
